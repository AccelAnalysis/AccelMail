<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AccelMail Admin Portal</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="../style.css">
<style>
  .tab-content { display: none; }
  .tab-content.active { display: block; }
  .tab-button { 
    padding: 10px 20px;
    margin: 0 5px;
    cursor: pointer;
    background: #f0f0f0;
    border: 1px solid #ddd;
    border-bottom: none;
    border-radius: 5px 5px 0 0;
  }
  .tab-button.active {
    background: #fff;
    border-bottom: 1px solid #fff;
    margin-bottom: -1px;
  }
  .tabs { margin-bottom: 20px; }
  .overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 16px;
  }
  .overview-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 16px;
    background: #fff;
  }
  .overview-card .metric {
    font-size: 1.75rem;
    font-weight: 600;
    color: #2f5597;
  }
  body.user-view .admin-only,
  body[data-role="user"] .admin-only {
    display: none !important;
  }
  table { width: 100%; border-collapse: collapse; margin: 20px 0; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
  th { background-color: #f2f2f2; }
  .action-buttons { margin: 10px 0; }
  .form-group { margin-bottom: 15px; }
  .form-group label { display: block; margin-bottom: 5px; }
  .form-group input { width: 100%; padding: 8px; }
</style>
</head>
<body data-role="user">
<div class="container">
  <h1>AccelMail Admin Portal</h1>

  <div class="tabs">
    <button class="tab-button active" data-tab="overview">Overview Panel</button>
    <button class="tab-button admin-only" data-tab="pricing">Pricing Matrix</button>
    <button class="tab-button admin-only" data-tab="sizes">Mailer Sizes</button>
    <button class="tab-button admin-only" data-tab="quantities">Quantity Tiers</button>
    <button class="tab-button admin-only" data-tab="fees">Fees & Settings</button>
    <button class="tab-button admin-only" data-tab="blackouts">Blackout Dates</button>
    <button class="tab-button admin-only" data-tab="quotes">Quote Requests</button>
  </div>

  <!-- Overview Panel (visible to all roles) -->
  <div id="overview" class="tab-content active">
    <h2>Overview Panel</h2>
    <p class="text-muted">Quick insights for standard users.</p>
    <div class="overview-grid">
      <div class="overview-card">
        <h3>Total Mailings</h3>
        <p id="overviewTotalMailings" class="metric">--</p>
      </div>
      <div class="overview-card">
        <h3>Pending Quotes</h3>
        <p id="overviewPendingQuotes" class="metric">--</p>
      </div>
      <div class="overview-card">
        <h3>Upcoming Mail Dates</h3>
        <ul id="overviewUpcomingDates"></ul>
      </div>
    </div>
  </div>

  <!-- Pricing Matrix Tab -->
  <div id="pricing" class="tab-content admin-only">
    <h2>Pricing Matrix</h2>
    <div class="action-buttons">
      <button id="addPricingRow"><i class="fas fa-plus"></i> Add Pricing Row</button>
      <button id="savePricingMatrix"><i class="fas fa-save"></i> Save All Changes</button>
    </div>
    <div class="table-responsive">
      <table id="pricingMatrix">
        <thead>
          <tr>
            <th>Mailer Size</th>
            <th>Quantity Range</th>
            <th>Price Per Unit ($)</th>
            <th>Invoice URL</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="pricingTbody">
          <!-- Populated by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Mailer Sizes Tab -->
  <div id="sizes" class="tab-content admin-only">
    <h2>Mailer Sizes</h2>
    <div class="form-group">
      <label for="sizeName">Size Name (e.g., 6x9, 9x12):</label>
      <input type="text" id="sizeName" placeholder="e.g., 6x9">
      <button id="addSize"><i class="fas fa-plus"></i> Add Size</button>
    </div>
    <table id="sizesTable">
      <thead>
        <tr>
          <th>Size Name</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="sizesTbody">
        <!-- Populated by JavaScript -->
      </tbody>
    </table>
  </div>

  <!-- Quantity Tiers Tab -->
  <div id="quantities" class="tab-content admin-only">
    <h2>Quantity Tiers</h2>
    <div class="form-group">
      <label for="quantityRange">Quantity Range (e.g., 100-249):</label>
      <input type="text" id="quantityRange" placeholder="e.g., 100-249">
      <button id="addQuantityTier"><i class="fas fa-plus"></i> Add Tier</button>
    </div>
    <table id="quantityTable">
      <thead>
        <tr>
          <th>Range</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="quantityTbody">
        <!-- Populated by JavaScript -->
      </tbody>
    </table>
  </div>

  <!-- Fees & Settings Tab -->
  <div id="fees" class="tab-content admin-only">
    <h2>Fees & Settings</h2>
    <div class="form-group">
      <label for="designFee">Design Service Fee ($):</label>
      <input type="number" id="designFee" step="0.01" min="0">
    </div>
    <div class="form-group">
      <label for="taxRate">Tax Rate (%):</label>
      <input type="number" id="taxRate" step="0.01" min="0" max="100">
    </div>
    <button id="saveFees"><i class="fas fa-save"></i> Save Settings</button>
  </div>

  <!-- Blackout Dates Tab -->
  <div id="blackouts" class="tab-content admin-only">
    <h2>Blackout Dates</h2>
    <div class="form-group">
      <label for="blackoutDate">Select Date:</label>
      <input type="date" id="blackoutDate">
      <label for="blackoutReason">Reason (optional):</label>
      <input type="text" id="blackoutReason" placeholder="e.g., Holiday, Maintenance">
      <button id="addBlackout"><i class="fas fa-plus"></i> Add Blackout Date</button>
    </div>
    <table id="blackoutsTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Reason</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="blackoutsTbody">
        <!-- Populated by JavaScript -->
      </tbody>
    </table>
  </div>

  <!-- Quote Requests Tab -->
  <div id="quotes" class="tab-content admin-only">
    <h2>Quote Requests</h2>
    <div class="filters">
      <label>Status: 
        <select id="statusFilter">
          <option value="all">All</option>
          <option value="new">New</option>
          <option value="contacted">Contacted</option>
          <option value="converted">Converted</option>
          <option value="rejected">Rejected</option>
        </select>
      </label>
      <button id="refreshQuotes"><i class="fas fa-sync"></i> Refresh</button>
    </div>
    <table id="quotesTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Name</th>
          <th>Email</th>
          <th>Size</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="quotesTbody">
        <!-- Populated by JavaScript -->
      </tbody>
    </table>
  </div>
</div>

<script src="dashboard.js" defer></script>
</body>
</html>