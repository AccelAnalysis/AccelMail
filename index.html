<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start Your Direct Mailer Campaign</title>
    <!-- Tailwind CSS for Responsive Design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar for better mobile feel */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Map Container to ensure edge-to-edge on mobile */
        .map-container {
            width: 100%;
            height: 400px; /* Default height */
            position: relative;
            background-color: #e2e8f0;
        }
        
        @media (max-width: 640px) {
            .map-container {
                height: 300px;
                margin-left: -1rem; /* Negative margin to pull to edge inside padded container if needed, but we handle this with w-full */
                margin-right: -1rem;
                width: calc(100% + 2rem);
            }
            .mobile-edge-pad {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between">
            <h1 class="text-xl font-bold text-brand-900">
                <i class="fa-solid fa-paper-plane mr-2 text-brand-600"></i> Direct Mailer Setup
            </h1>
        </div>
    </header>

    <form id="mailerForm" class="pb-20">
        
        <!-- SECTION: Locate Market Segments -->
        <section class="mb-2 bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-3xl mx-auto">
                <div class="p-4 border-b border-gray-100">
                    <h2 class="text-lg font-semibold text-gray-900 flex items-center">
                        <span class="bg-brand-100 text-brand-700 rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">1</span>
                        Locate Market Segments
                    </h2>
                    <p class="text-sm text-gray-500 mt-1 ml-11">Identify where your potential customers are located.</p>
                </div>

                <!-- Targeting Preferences Map (Edge to Edge) -->
                <div class="w-full bg-gray-200 relative group">
                    <!-- Placeholder for Map - REPLACE iframe src with your actual map tool -->
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d12000.0!2d-74.006!3d40.7128!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1600000000000!5m2!1sen!2sus" 
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                        <!-- Overlay hint for user interaction -->
                        <div class="absolute bottom-4 right-4 bg-white/90 backdrop-blur px-3 py-1 rounded shadow text-xs text-gray-600 pointer-events-none">
                            <i class="fa-solid fa-hand-pointer mr-1"></i> Interact to select area
                        </div>
                    </div>
                </div>

                <!-- Selection Criteria Tabs -->
                <div class="p-6">
                    <label class="block text-sm font-medium text-gray-700 mb-3">How would you like to define your target segment?</label>
                    
                    <div class="bg-gray-50 rounded-xl p-1 border border-gray-200 flex flex-col sm:flex-row gap-2">
                        <!-- Tab Buttons -->
                        <div class="flex rounded-lg bg-gray-200 p-1 w-full sm:w-auto shrink-0 self-start">
                            <button type="button" onclick="switchTab('survey')" id="btn-survey" class="flex-1 sm:flex-none px-4 py-2 rounded-md text-sm font-medium bg-white text-gray-900 shadow-sm transition-all duration-200">
                                <i class="fa-solid fa-clipboard-list mr-2"></i>Target Survey
                            </button>
                            <button type="button" onclick="switchTab('expert')" id="btn-expert" class="flex-1 sm:flex-none px-4 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 transition-all duration-200">
                                <i class="fa-solid fa-user-tie mr-2"></i>Expert Help
                            </button>
                        </div>
                        
                        <!-- Content Area -->
                        <div class="flex-grow p-2 pl-0 sm:pl-4">
                            <!-- Hidden input to store selection choice -->
                            <input type="hidden" name="segment_choice" id="segment_choice" value="Survey">

                            <!-- Tab 1: Survey -->
                            <div id="tab-survey" class="animate-fade-in block">
                                <p class="text-sm text-gray-600 mb-3">
                                    Already know your demographics? Fill out our detailed target market survey to specify exactly who you want to reach.
                                </p>
                                <a href="#" target="_blank" class="inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500">
                                    Take Market Survey <i class="fa-solid fa-external-link-alt ml-2"></i>
                                </a>
                            </div>

                            <!-- Tab 2: Expert -->
                            <div id="tab-expert" class="animate-fade-in hidden">
                                <p class="text-sm text-gray-600 mb-3">
                                    Unsure where to start? Schedule a 15-min call with a segmentation expert to build your ideal list.
                                </p>
                                <a href="#" target="_blank" class="inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500">
                                    Schedule Consultation <i class="fa-regular fa-calendar ml-2"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: Send Greetings & Thank You's -->
        <section class="mb-4 bg-white shadow-sm border-y border-gray-200 py-6">
            <div class="max-w-3xl mx-auto px-4">
                <div class="mb-6">
                    <h2 class="text-lg font-semibold text-gray-900 flex items-center">
                        <span class="bg-brand-100 text-brand-700 rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">2</span>
                        Send Greetings & Thank You's
                    </h2>
                    <p class="text-sm text-gray-500 mt-1 ml-11">Define the message and scale of your campaign.</p>
                </div>

                <div class="ml-0 sm:ml-11 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Campaign Name -->
                    <div class="col-span-1 md:col-span-2">
                        <label for="campaign_name" class="block text-sm font-medium text-gray-700">Campaign Title</label>
                        <input type="text" name="campaign_name" id="campaign_name" placeholder="e.g. Q4 Client Appreciation" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm p-3 border">
                    </div>

                    <!-- Mailer Type -->
                    <div>
                        <label for="mailer_type" class="block text-sm font-medium text-gray-700">Mailer Type</label>
                        <select name="mailer_type" id="mailer_type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm p-3 border bg-white">
                            <option value="Postcard">Postcard (4x6)</option>
                            <option value="Greeting Card">Greeting Card (Folded)</option>
                            <option value="Letter">Letter in Envelope</option>
                            <option value="Brochure">Tri-fold Brochure</option>
                        </select>
                    </div>

                    <!-- Estimated Quantity -->
                    <div>
                        <label for="quantity" class="block text-sm font-medium text-gray-700">Est. Quantity</label>
                        <input type="number" name="quantity" id="quantity" placeholder="1000" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm p-3 border">
                    </div>
                    
                    <!-- Message / Intent -->
                    <div class="col-span-1 md:col-span-2">
                        <label for="message_intent" class="block text-sm font-medium text-gray-700">Key Message or Offer</label>
                        <textarea name="message_intent" id="message_intent" rows="3" placeholder="What is the main thing you want to say to your recipients?" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm p-3 border"></textarea>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: Contact Info -->
        <section class="bg-white shadow-sm border-t border-gray-200 py-6">
            <div class="max-w-3xl mx-auto px-4">
                <div class="mb-6">
                    <h2 class="text-lg font-semibold text-gray-900 flex items-center">
                        <span class="bg-brand-100 text-brand-700 rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">3</span>
                        Contact Info & Next Steps
                    </h2>
                    <p class="text-sm text-gray-500 mt-1 ml-11">How should we reach you to finalize this campaign?</p>
                </div>

                <div class="ml-0 sm:ml-11 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Company Name -->
                    <div class="col-span-1 md:col-span-2">
                        <label for="company_name" class="block text-sm font-medium text-gray-700">Company Name</label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-building text-gray-400"></i>
                            </div>
                            <input type="text" name="company_name" id="company_name" class="focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md p-3 border" placeholder="Your Business Inc.">
                        </div>
                    </div>

                    <!-- Contact Name -->
                    <div>
                        <label for="contact_name" class="block text-sm font-medium text-gray-700">Contact Name</label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-user text-gray-400"></i>
                            </div>
                            <input type="text" name="contact_name" id="contact_name" required class="focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md p-3 border" placeholder="John Doe">
                        </div>
                    </div>

                    <!-- Phone -->
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-phone text-gray-400"></i>
                            </div>
                            <input type="tel" name="phone" id="phone" class="focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md p-3 border" placeholder="(555) 123-4567">
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="col-span-1 md:col-span-2">
                        <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-envelope text-gray-400"></i>
                            </div>
                            <input type="email" name="email" id="email" required class="focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md p-3 border" placeholder="you@example.com">
                        </div>
                    </div>

                    <!-- Follow-up Method (Moved from Section 4) -->
                    <div>
                        <label for="follow_up_method" class="block text-sm font-medium text-gray-700">Preferred Follow-up Method</label>
                        <select name="follow_up_method" id="follow_up_method" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm p-3 border bg-white">
                            <option value="Email">Email</option>
                            <option value="Phone Call">Phone Call</option>
                            <option value="Text Message">Text Message</option>
                            <option value="No Preference">No Preference</option>
                        </select>
                    </div>

                    <!-- Notes Field -->
                    <div class="col-span-1 md:col-span-2">
                        <label for="campaign_notes" class="block text-sm font-medium text-gray-700">Additional Notes</label>
                        <textarea name="campaign_notes" id="campaign_notes" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm p-3 border" placeholder="Any specific requirements or questions?"></textarea>
                    </div>
                </div>
            </div>
        </section>

        <!-- Submit Button -->
        <div class="max-w-3xl mx-auto px-4 mt-8 pb-12">
            <button type="submit" id="submitBtn" class="w-full flex justify-center py-4 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 transition-colors">
                Submit Campaign Request
            </button>
            <p class="text-center text-xs text-gray-500 mt-4">
                <i class="fa-solid fa-lock mr-1"></i> Your information is secure. We will contact you shortly to finalize details.
            </p>
        </div>

    </form>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6">
                <div>
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
                        <i class="fa-solid fa-check text-green-600 text-lg"></i>
                    </div>
                    <div class="mt-3 text-center sm:mt-5">
                        <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">Request Received!</h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-500">
                                Thank you for starting your campaign. We have received your details and will follow up via your preferred method shortly.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-6">
                    <button type="button" onclick="closeModal()" class="inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-brand-600 text-base font-medium text-white hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 sm:text-sm">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. Tab Logic for Section 1 ---
        function switchTab(tabName) {
            // Update buttons
            const btnSurvey = document.getElementById('btn-survey');
            const btnExpert = document.getElementById('btn-expert');
            
            // Update Content
            const contentSurvey = document.getElementById('tab-survey');
            const contentExpert = document.getElementById('tab-expert');
            const hiddenInput = document.getElementById('segment_choice');

            if (tabName === 'survey') {
                // Style Active Button
                btnSurvey.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                btnSurvey.classList.remove('text-gray-600');
                
                // Style Inactive Button
                btnExpert.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                btnExpert.classList.add('text-gray-600');

                // Show Content
                contentSurvey.classList.remove('hidden');
                contentExpert.classList.add('hidden');
                
                hiddenInput.value = "Survey";

            } else {
                // Style Active Button
                btnExpert.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                btnExpert.classList.remove('text-gray-600');

                // Style Inactive Button
                btnSurvey.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                btnSurvey.classList.add('text-gray-600');

                // Show Content
                contentExpert.classList.remove('hidden');
                contentSurvey.classList.add('hidden');

                hiddenInput.value = "Expert Consultation";
            }
        }

        // --- 2. Form Submission Logic (Google Sheets) ---
        const form = document.getElementById('mailerForm');
        const submitBtn = document.getElementById('submitBtn');
        
        // REPLACE THIS URL WITH YOUR GOOGLE APPS SCRIPT WEB APP URL
        const scriptURL = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE'; 

        form.addEventListener('submit', e => {
            e.preventDefault();
            
            if(!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Loading state
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin mr-2"></i> Sending...';

            fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => {
                    // Reset Button
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalBtnText;
                    
                    // Show Success
                    document.getElementById('successModal').classList.remove('hidden');
                    form.reset();
                    // Reset tabs
                    switchTab('survey');
                })
                .catch(error => {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalBtnText;
                    console.error('Error!', error.message);
                    alert("There was a problem submitting the form. Please try again or contact us directly.");
                });
        });

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
        }
    </script>
</body>
</html>
